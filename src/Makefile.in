@SET_MAKE@

subdir = src
prefix = @prefix@

DISTFILES = Makefile.in *.cc

CXXFLAGS = @CXXFLAGS@ @EXTRA_CFLAGS@
LDFLAGS = @LDFLAGS@ @EXTRA_LDFLAGS@
INSTALL = @INSTALL@

LIBS = @LIBS@
#LIBS = @LIBS@ -lefence

OBJS = gplates_main.o

PROGNAME = gplates

all:		$(PROGNAME)

install:
	@INSTALL@ -d @prefix@/bin
	@INSTALL@ -s $(PROGNAME) @prefix@/bin

uninstall:
	rm -f @prefix@/bin/$(PROGNAME)

clean:
	rm -f $(OBJS)
	rm -f $(PROGNAME)
	rm -f core gmon.out

$(PROGNAME):	$(OBJS)
		@CXX@ $(LDFLAGS) $^ $(LIBS) -o $@

%.o : %.cc
	@CXX@ $(CXXFLAGS) -c $< -o $@



################
# DEPENDENCIES #
################

dep:
	@echo -n "Generating dependencies... "
	@@CXX@ -MM $(OBJS:.o=.cc) > depend.1
	@echo "done!"

ifeq (depend.1, $(wildcard depend.1))
include depend.1
endif



distdir = ../@PACKAGE_TARNAME@-@PACKAGE_VERSION@/$(subdir)
dist:	Makefile $(DISTFILES)
	for file in $(DISTFILES) ; do \
		ln $$file $(distdir) 2>/dev/null || \
			cp -p $$file $(distdir); \
	done
