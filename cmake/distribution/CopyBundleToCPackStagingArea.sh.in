#!/bin/sh

if [ -e "@STAGING_AREA_FOR_CPACK@" ]
then
# Remove the previous package staging area so we start with a clean bundle
	echo "Removing Previous @BUILT_BUNLDE@ bundle at @STAGING_AREA_FOR_CPACK@"
	rm -rf "@STAGING_AREA_FOR_CPACK@"
fi

if [ $# -eq 1 ]
then
	GPLATES_INSTALLER_FOLDER="$1"
else
	GPLATES_INSTALLER_FOLDER="@STAGING_AREA_FOR_CPACK@"
fi

mkdir -p "${GPLATES_INSTALLER_FOLDER}/"

# Copy the @BUILT_BUNDLE@ bundle to the installation location
echo "Copying @BUILT_BUNDLE@ from the build tree to ${GPLATES_INSTALLER_FOLDER}/"
cp -Rp "@BUILT_BUNDLE@" "${GPLATES_INSTALLER_FOLDER}/"

# Copy extra files/directories that are to be included along with the GPlates app bundle.
for extra in @GPLATES_BINARY_INSTALL_EXTRAS@
do
	if [ -e $extra ]
	then
		cp -Rp $extra "${GPLATES_INSTALLER_FOLDER}/"
	fi
done

# Copy extra files/directories that are to be included in the CPACK staging area.
# Note that this is not the GPlates installer folder (where the GPlates bundle and
# optional sample data are stored).
for extra in @GPLATES_CPACK_STAGING_AREA_EXTRAS@
do
	if [ -e $extra ]
	then
		cp -Rp $extra "@STAGING_AREA_FOR_CPACK@/"
	fi
done
