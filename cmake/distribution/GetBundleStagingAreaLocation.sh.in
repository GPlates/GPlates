#!/bin/sh

# The command line arguments are the root source code directory and the manually
# set source code control version number.
# If the source code control version number has been manually set then it means this
# is a public release so we don't append the version number to the folder name, otherwise
# it's an internal release and we run 'svnversion' on the root source code directory to
# determine the version number to append to the folder name.
GPLATES_SUB_FOLDER="@GPLATES_PACKAGE_NAME@-@GPLATES_PACKAGE_VERSION@"
if [ $# -eq 2 -a -z "$2" ]
then
	SOURCE_CODE_CONTROL_VERSION=`svnversion $1`
	GPLATES_SUB_FOLDER="${GPLATES_SUB_FOLDER}_r${SOURCE_CODE_CONTROL_VERSION}"
fi
GPLATES_BUNDLE_LOCATION="@STAGING_AREA_FOR_CPACK@/${GPLATES_SUB_FOLDER}"

mkdir -p "${GPLATES_BUNDLE_LOCATION}/"

# Write the name of the folder to standard output so caller knows the folder name.
echo "${GPLATES_BUNDLE_LOCATION}"
